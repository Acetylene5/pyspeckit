

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>spectrum &mdash; pyspeckit v0.1 documentation</title>
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/logo.ico"/>
    <link rel="top" title="pyspeckit v0.1 documentation" href="index.html" />
    <link rel="up" title="Classes" href="classes.html" />
    <link rel="next" title="Cubes" href="cubes.html" />
    <link rel="prev" title="Classes" href="classes.html" />
     
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setDomainName', 'pyspeckit.bitbucket.org']);
      _gaq.push(['_setAllowHash', false]);
      _gaq.push(['_trackPageview']);


    </script>
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
          <p class="logo"><a href="http://pyspeckit.bitbucket.org">
            <img class="logo" src="_static/logo.png" alt="Logo"/>
          </a></p>
        <h1><a href="index.html">pyspeckit v0.1 documentation</a></h1>
        <div class="rel">
          <a href="http://pyspeckit.bitbucket.org/">PySpecKit Home </a>  |
          <a href=index.html>Docs Home </a>  |
          <a href="https://bitbucket.org/pyspeckit/pyspeckit.bitbucket.org/overview">Bitbucket Home </a>  |
          <a href="https://bitbucket.org/pyspeckit/pyspeckit.bitbucket.org/wiki/Home">Wiki</a>  |
          <a href=search.html>Search </a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-pyspeckit.spectrum">
<span id="spectrum"></span><h1>spectrum<a class="headerlink" href="#module-pyspeckit.spectrum" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pyspeckit.spectrum.Spectrum">
<em class="property">class </em><tt class="descclassname">pyspeckit.spectrum.</tt><tt class="descname">Spectrum</tt><big>(</big><em>filename=None</em>, <em>filetype=None</em>, <em>xarr=None</em>, <em>data=None</em>, <em>error=None</em>, <em>header=None</em>, <em>doplot=False</em>, <em>maskdata=True</em>, <em>plotkwargs={}</em>, <em>xarrkwargs={}</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>The core class for the spectroscopic toolkit.  Contains the data and error
arrays along with wavelength / frequency / velocity information in various
formats.</p>
<dl class="docutils">
<dt>Contains functions / classes to:</dt>
<dd><dl class="first docutils">
<dt>-read and write FITS-compliant spectroscopic data sets</dt>
<dd>-read fits binaries? (not implemented)</dd>
</dl>
<p>-plot a spectrum
-fit a spectrum both interactively and non-interactively</p>
<blockquote>
<div>-with gaussian, voigt, lorentzian, and multiple (gvl) profiles</div></blockquote>
<dl class="docutils">
<dt>-fit a continuum &#8220;baseline&#8221; to a selected region with an n-order</dt>
<dd>polynomial</dd>
</dl>
<p class="last">-perform fourier transforms and operations in fourier space on a spectrum (not implemented)</p>
</dd>
</dl>
<p>Example usage:</p>
<p># automatically load a &#8220;compliant&#8221; (linear X-axis) FITS file</p>
<p>spec = pyspeckit.Spectrum(&#8216;test.fits&#8217;)</p>
<p># plot the spectrum</p>
<p>spec.plotter()</p>
<p>__init__
Initialize the Spectrum.  Accepts files in the following formats:</p>
<blockquote>
<div><ul class="simple">
<li>.fits</li>
<li>.txt</li>
<li>.hdf5</li>
</ul>
</div></blockquote>
<p>Must either pass in a filename or ALL of xarr, data, and header, plus
optionally error.</p>
<p>doplot - if specified, will generate a plot when created</p>
<p>kwargs are passed to the reader, not the plotter</p>
<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.copy">
<tt class="descname">copy</tt><big>(</big><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a copy of the spectrum with its own plotter, fitter, etc.
Useful for, e.g., comparing smoothed to unsmoothed data</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.crop">
<tt class="descname">crop</tt><big>(</big><em>x1</em>, <em>x2</em>, <em>units=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.crop" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the current spectrum with a subset from x1 to x2 in current
units</p>
<p>Fixes CRPIX1 and baseline and model spectra to match cropped data spectrum</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.getlines">
<tt class="descname">getlines</tt><big>(</big><em>linetype='radio'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.getlines" title="Permalink to this definition">¶</a></dt>
<dd><p>Access a registered database of spectral lines.  Will add an attribute
with the name linetype, which then has properties defined by the
speclines module (most likely, a table and a &#8220;show&#8221; function to display
the lines)</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.interpnans">
<tt class="descname">interpnans</tt><big>(</big><em>spec</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.interpnans" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate over NAN values, replacing them with their neighbors...</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.measure">
<tt class="descname">measure</tt><big>(</big><em>z=None</em>, <em>d=None</em>, <em>fluxnorm=None</em>, <em>miscline=None</em>, <em>misctol=None</em>, <em>ignore=None</em>, <em>derive=True</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the measurements class - only do this after you have run a fitter otherwise pyspeckit will be angry!</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.moments">
<tt class="descname">moments</tt><big>(</big><em>unit='km/s'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.moments" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Return the moments of the spectrum.  In order to assure that the 1st
and 2nd moments are meaningful, a &#8216;default&#8217; unit is set.  If unit is not
set, will use current unit.</p>
<p>Returns (height, amplitude, x, width_x)</p>
</div></blockquote>
<p>the gaussian parameters of a 1D distribution by calculating its
moments.  Depending on the input parameters, will only output 
a subset of the above.
&#8220;height&#8221; is the background level
&#8220;amplitude&#8221; is the maximum (or minimum) of the data after background subtraction
&#8220;x&#8221; is the first moment
&#8220;width_x&#8221; is the second moment</p>
<p>If using masked arrays, pass estimator=numpy.ma.median
&#8216;estimator&#8217; is used to measure the background level (height)</p>
<p>negamp can be used to force the peak negative (True), positive (False),
or it will be &#8220;autodetected&#8221; (negamp=None)</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.parse_hdf5_header">
<tt class="descname">parse_hdf5_header</tt><big>(</big><em>hdr</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.parse_hdf5_header" title="Permalink to this definition">¶</a></dt>
<dd><p>HDF5 reader will create a hdr dictionary from HDF5 dataset
attributes if they exist.  This routine will convert that dict
to a pyfits header instance.</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.parse_header">
<tt class="descname">parse_header</tt><big>(</big><em>hdr</em>, <em>specname=None</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.parse_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse parameters from a .fits header into required spectrum structure
parameters</p>
<p>This should be moved to the FITSSpectrum subclass when that is available</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.parse_text_header">
<tt class="descname">parse_text_header</tt><big>(</big><em>Table</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.parse_text_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Grab relevant parameters from a table header (xaxis type, etc)</p>
<p>This function should only exist for Spectrum objects created from
.txt or other atpy table type objects</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.shape">
<tt class="descname">shape</tt><big>(</big><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the data shape</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.slice">
<tt class="descname">slice</tt><big>(</big><em>x1</em>, <em>x2</em>, <em>units=None</em>, <em>copy=True</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice a spectrum.  Defaults to the current units.  Can specify &#8216;pixels&#8217;
if you want to just slice by index</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.smooth">
<tt class="descname">smooth</tt><big>(</big><em>smooth</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.smooth" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div>Smooth the spectrum by factor &#8220;smooth&#8221;.  
sm.smooth doc:</div></blockquote>
<p>Smooth and downsample the data array
smoothtype - &#8216;gaussian&#8217;,&#8217;hanning&#8217;, or &#8216;boxcar&#8217;
downsample - Downsample the data?
downsample_factor - Downsample by the smoothing factor, or something else?
convmode - see numpy.convolve.  &#8216;same&#8217; returns an array of the same length as</p>
<blockquote>
<div>&#8216;data&#8217; (assuming data is larger than the kernel)</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.stats">
<tt class="descname">stats</tt><big>(</big><em>statrange=()</em>, <em>interactive=False</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return some statistical measures in a dictionary (somewhat self-explanatory)</p>
<p>range - X-range over which to perform measures
interactive - specify range interactively in plotter</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectrum.write">
<tt class="descname">write</tt><big>(</big><em>filename</em>, <em>type=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectrum.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the spectrum to a file.  The available file types are listed
in spectrum.writers.writers</p>
<p>type - what type of file to write to?  If not specified, will attempt
to determine type from suffix</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyspeckit.spectrum.Spectra">
<em class="property">class </em><tt class="descclassname">pyspeckit.spectrum.</tt><tt class="descname">Spectra</tt><big>(</big><em>speclist</em>, <em>xunits='GHz'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectra" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">pyspeckit.spectrum.classes.Spectrum</span></tt></p>
<p>A list of individual Spectrum objects.  Intended to be used for
concatenating different wavelength observations of the SAME OBJECT.  Can be
operated on just like any Spectrum object, incuding fitting.  Useful for
fitting multiple lines on non-continguous axes simultaneously.  Be wary of
plotting these though...</p>
<p>Can be indexed like python lists.</p>
<p>X array is forcibly sorted in increasing order</p>
<dl class="method">
<dt id="pyspeckit.spectrum.Spectra.fiteach">
<tt class="descname">fiteach</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectra.fiteach" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit each spectrum within the Spectra object</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectra.ploteach">
<tt class="descname">ploteach</tt><big>(</big><em>xunits=None</em>, <em>inherit_fit=False</em>, <em>plot_fit=True</em>, <em>plotfitkwargs={}</em>, <em>**plotkwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectra.ploteach" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot each spectrum in its own window
inherit_fit - if specified, will grab the fitter &amp; fitter properties from Spectra</p>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.Spectra.smooth">
<tt class="descname">smooth</tt><big>(</big><em>smooth</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.Spectra.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth the spectrum by factor &#8220;smooth&#8221;.  Options are defined in sm.smooth</p>
<p>because &#8216;Spectra&#8217; does not have a header attribute, don&#8217;t do anything to it...</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pyspeckit.spectrum.ObsBlock">
<em class="property">class </em><tt class="descclassname">pyspeckit.spectrum.</tt><tt class="descname">ObsBlock</tt><big>(</big><em>speclist</em>, <em>xtype='frequency'</em>, <em>xarr=None</em>, <em>force=False</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.ObsBlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">pyspeckit.spectrum.classes.Spectra</span></tt></p>
<p>An Observation Block</p>
<p>Consists of multiple spectra with a shared X-axis.  Intended to hold groups
of observations of the same object in the same setup for later averaging.</p>
<p>ObsBlocks can be indexed like python lists.</p>
<dl class="method">
<dt id="pyspeckit.spectrum.ObsBlock.average">
<tt class="descname">average</tt><big>(</big><em>weight=None</em>, <em>inverse_weight=False</em>, <em>error='erravgrtn'</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.ObsBlock.average" title="Permalink to this definition">¶</a></dt>
<dd><p>Average all scans in an ObsBlock.  Returns a single Spectrum object</p>
<p>weight - a header keyword to weight by
error - estimate the error spectrum.  Can be:</p>
<blockquote>
<div>&#8216;scanrms&#8217;   - the standard deviation of each pixel across all scans
&#8216;erravg&#8217;    - the average of all input error spectra
&#8216;erravgrtn&#8217; - the average of all input error spectra divided by sqrt(n_obs)</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="pyspeckit.spectrum.ObsBlock.smooth">
<tt class="descname">smooth</tt><big>(</big><em>smooth</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.ObsBlock.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth the spectrum by factor &#8220;smooth&#8221;.  Options are defined in sm.smooth</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-pyspeckit.spectrum"></span><dl class="function">
<dt id="pyspeckit.spectrum.register_reader">
<tt class="descclassname">pyspeckit.spectrum.</tt><tt class="descname">register_reader</tt><big>(</big><em>filetype</em>, <em>function</em>, <em>suffix</em>, <em>default=False</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.register_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a reader function.</p>
<p>Required Arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><em>filetype</em>: [ string ]</dt>
<dd>The file type name</dd>
<dt><em>function</em>: [ function ]</dt>
<dd>The reader function.  Should take a filename as input
and return an X-axis object (see units.py), a spectrum,
an error spectrum (initialize it to 0&#8217;s if empty), and a
pyfits header instance</dd>
<dt><em>suffix</em>: [ int ]</dt>
<dd>What suffix should the file have?</dd>
</dl>
</div></blockquote>
<p>Optional Keyword Arguments:</p>
</dd></dl>

<dl class="function">
<dt id="pyspeckit.spectrum.register_writer">
<tt class="descclassname">pyspeckit.spectrum.</tt><tt class="descname">register_writer</tt><big>(</big><em>filetype</em>, <em>function</em>, <em>suffix</em>, <em>default=False</em><big>)</big><a class="headerlink" href="#pyspeckit.spectrum.register_writer" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a writer function.</p>
<p>Required Arguments:</p>
<blockquote>
<div><dl class="docutils">
<dt><em>filetype</em>: [ string ]</dt>
<dd>The file type name</dd>
<dt><em>function</em>: [ function ]</dt>
<dd>The writer function.  Will be an attribute of Spectrum
object, and called as spectrum.Spectrum.write_hdf5(), 
for example.</dd>
<dt><em>suffix</em>: [ int ]</dt>
<dd>What suffix should the file have?</dd>
</dl>
</div></blockquote>
<p>Optional Keyword Arguments:</p>
</dd></dl>

</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models &amp; Fitting</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="classes.html">Base Classes</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Spectrum, Spectra, and ObsBlocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="cubes.html">SpectroscopicCube and its supporting functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Class Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="readers.html">File Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrappers.html">High-Level Wrappers</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer">
      &copy; Copyright 2011, Adam Ginsburg and Jordan Mirocha.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.8.
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-6253200-7']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
        
    </div>
  </body>
</html>